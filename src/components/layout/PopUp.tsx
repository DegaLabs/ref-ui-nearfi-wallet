import React, { useEffect, useState } from 'react';
import { FormattedMessage } from 'react-intl';
import { useHistory } from 'react-router-dom';
import {
  Learn_more,
  CloseBtn,
  Learn_more_m,
  CloseBtn_white,
  CircleCloseBtn,
} from '~components/icon/Common';
import {
  PopupBox1,
  PopupBox2,
  PopupBox3,
  PopupBox4,
  PopupText,
  PopupBox1Mobile,
} from '~components/icon/Xref';
import { IncentivePopup, LoveIcon, CloseButton } from '~components/icon/Farm';
import { ModalCloseAuto } from '~components/icon';
import { isMobile } from '~utils/device';
import { Swiper, SwiperSlide } from 'swiper/react';
import 'swiper/swiper.min.css';
import SwiperCore, { Autoplay } from 'swiper';
SwiperCore.use([Autoplay]);

export default function PopUpSwiper() {
  const [closeStatus, setCloseStatus] = useState(true);
  const history = useHistory();
  useEffect(() => {
    const popupSwiper = localStorage.getItem('popup-migrate');
    if (popupSwiper == '1') {
      setCloseStatus(true);
    } else {
      setCloseStatus(false);
    }
  }, []);
  const closePop = (e: any) => {
    localStorage.setItem('popup-migrate', '1');
    e.stopPropagation();
    setCloseStatus(true);
  };
  const mobile = isMobile();
  return (
    <>
      {closeStatus ? null : (
        <div
          className={`fixed xs:left-1/2 xs:transform xs:-translate-x-1/2 md:left-1/2 md:transform md:-translate-x-1/2 z-50 lg:right-0 ${
            mobile ? 'farmPopupBoxMobile' : 'farmPopupBox'
          }`}
        >
          <Swiper
            spaceBetween={30}
            centeredSlides={true}
            autoplay={{
              delay: 3500,
              disableOnInteraction: false,
            }}
            loop={false}
          >
            <SwiperSlide>
              <div
                className="relative cursor-pointer"
                onClick={() => {
                  window.open('/farms');
                }}
              >
                <div
                  onClick={closePop}
                  className="flex justify-end items-center absolute top-0 right-0 cursor-pointer w-8 h-8"
                >
                  <CircleCloseBtn></CircleCloseBtn>
                </div>
                <FarmsMigrateBg></FarmsMigrateBg>
              </div>
            </SwiperSlide>
          </Swiper>
        </div>
      )}
    </>
  );
}
function FarmsMigrateBg() {
  return (
    <svg
      width="349"
      height="166"
      viewBox="0 0 349 166"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <rect
        width="292"
        height="134"
        rx="8"
        transform="matrix(-1 0 0 1 349 32)"
        fill="url(#paint0_linear_1405_13)"
      />
      <path
        d="M184.356 84V65.8H180.404V77.006L171.876 65.8H168.184V84H172.136V72.43L180.95 84H184.356ZM202.583 84V80.438H192.703V76.616H201.283V73.054H192.703V69.362H202.453V65.8H188.725V84H202.583ZM232.351 65.8H228.165L224.395 78.124L220.313 65.748H216.881L212.799 78.124L209.029 65.8H204.739L210.953 84.13H214.437L218.545 72.222L222.653 84.13H226.137L232.351 65.8ZM256.97 69.44V65.8H243.112V84H247.116V76.954H255.8V73.314H247.116V69.44H256.97ZM275.824 84L268.024 65.67H264.332L256.532 84H260.614L262.278 79.918H269.974L271.638 84H275.824ZM268.544 76.382H263.708L266.126 70.48L268.544 76.382ZM294.363 84L289.917 77.5C292.231 76.642 293.817 74.796 293.817 71.858V71.806C293.817 68.062 291.243 65.8 286.953 65.8H278.633V84H282.637V78.176H285.783L289.683 84H294.363ZM289.761 72.066C289.761 73.6 288.643 74.64 286.693 74.64H282.637V69.414H286.615C288.565 69.414 289.761 70.298 289.761 72.014V72.066ZM315.622 84V65.8H311.306L306.522 73.496L301.738 65.8H297.422V84H301.348V72.196L306.418 79.892H306.522L311.644 72.118V84H315.622ZM186.384 114V95.8H182.068L177.284 103.496L172.5 95.8H168.184V114H172.11V102.196L177.18 109.892H177.284L182.406 102.118V114H186.384ZM194.942 114V95.8H190.938V114H194.942ZM216.027 111.426V103.522H208.123V106.98H212.153V109.58C211.139 110.308 209.839 110.672 208.383 110.672C205.159 110.672 202.871 108.228 202.871 104.9V104.848C202.871 101.754 205.185 99.18 208.097 99.18C210.203 99.18 211.451 99.856 212.855 101.026L215.377 97.984C213.479 96.372 211.503 95.488 208.227 95.488C202.715 95.488 198.685 99.726 198.685 104.9V104.952C198.685 110.334 202.585 114.312 208.253 114.312C211.581 114.312 214.155 113.012 216.027 111.426ZM235.609 114L231.163 107.5C233.477 106.642 235.063 104.796 235.063 101.858V101.806C235.063 98.062 232.489 95.8 228.199 95.8H219.879V114H223.883V108.176H227.029L230.929 114H235.609ZM231.007 102.066C231.007 103.6 229.889 104.64 227.939 104.64H223.883V99.414H227.861C229.811 99.414 231.007 100.298 231.007 102.014V102.066ZM256.4 114L248.6 95.67H244.908L237.108 114H241.19L242.854 109.918H250.55L252.214 114H256.4ZM249.12 106.382H244.284L246.702 100.48L249.12 106.382ZM270.653 99.492V95.8H255.573V99.492H261.111V114H265.115V99.492H270.653ZM277.919 114V95.8H273.915V114H277.919ZM301.005 104.9V104.848C301.005 99.674 296.975 95.488 291.359 95.488C285.743 95.488 281.661 99.726 281.661 104.9V104.952C281.661 110.126 285.691 114.312 291.307 114.312C296.923 114.312 301.005 110.074 301.005 104.9ZM296.819 104.952C296.819 108.072 294.583 110.62 291.359 110.62C288.135 110.62 285.847 108.02 285.847 104.9V104.848C285.847 101.728 288.083 99.18 291.307 99.18C294.531 99.18 296.819 101.78 296.819 104.9V104.952ZM320.729 114V95.8H316.777V107.006L308.249 95.8H304.557V114H308.509V102.43L317.323 114H320.729Z"
        fill="white"
      />
      <rect
        x="165"
        y="24"
        width="149"
        height="27"
        rx="13.5"
        fill="black"
        stroke="#00FFD1"
        stroke-width="2"
      />
      <path
        d="M191.068 30.4H188.08L184.786 39.274L181.492 30.4H178.432L183.526 43.09H185.974L191.068 30.4ZM191.932 31.39L192.508 33.658L194.704 33.118V43H197.44V30.31H195.55L191.932 31.39ZM233.748 30.4H230.76L227.466 39.274L224.172 30.4H221.112L226.206 43.09H228.654L233.748 30.4ZM239.742 32.704C240.732 32.704 241.434 33.28 241.434 34.342C241.434 35.386 240.822 36.07 239.256 37.366L235.062 40.804V43H244.386V40.606H238.896L240.948 39.022C243.18 37.294 244.26 36.232 244.26 34.126C244.26 31.768 242.604 30.22 239.922 30.22C237.672 30.22 236.466 31.138 235.224 32.83L237.168 34.396C238.104 33.244 238.77 32.704 239.742 32.704ZM261.897 32.92V30.4H252.303V43H255.075V38.122H261.087V35.602H255.075V32.92H261.897ZM274.95 43L269.55 30.31H266.994L261.594 43H264.42L265.572 40.174H270.9L272.052 43H274.95ZM269.91 37.726H266.562L268.236 33.64L269.91 37.726ZM287.785 43L284.707 38.5C286.309 37.906 287.407 36.628 287.407 34.594V34.558C287.407 31.966 285.625 30.4 282.655 30.4H276.895V43H279.667V38.968H281.845L284.545 43H287.785ZM284.599 34.738C284.599 35.8 283.825 36.52 282.475 36.52H279.667V32.902H282.421C283.771 32.902 284.599 33.514 284.599 34.702V34.738ZM302.503 43V30.4H299.515L296.203 35.728L292.891 30.4H289.903V43H292.621V34.828L296.131 40.156H296.203L299.749 34.774V43H302.503Z"
        fill="#00FFD1"
      />
      <path
        d="M204 35.25C203.586 35.25 203.25 35.5858 203.25 36C203.25 36.4142 203.586 36.75 204 36.75V35.25ZM216.53 36.5303C216.823 36.2374 216.823 35.7626 216.53 35.4697L211.757 30.6967C211.464 30.4038 210.99 30.4038 210.697 30.6967C210.404 30.9896 210.404 31.4645 210.697 31.7574L214.939 36L210.697 40.2426C210.404 40.5355 210.404 41.0104 210.697 41.3033C210.99 41.5962 211.464 41.5962 211.757 41.3033L216.53 36.5303ZM204 36.75H216V35.25H204V36.75Z"
        fill="#00FFD1"
      />
      <path
        d="M39.1252 39.0822L65.9837 2.72428C67.0535 1.27608 69.1491 1.08985 70.4575 2.3267L96.3978 26.8479C98.1455 28.4999 97.3363 31.4337 94.9888 31.9563L86.369 33.8751C84.9969 34.1806 84.0208 35.3978 84.0208 36.8035V77.1198C84.0208 78.4411 83.1565 79.6067 81.8922 79.9905L57.6743 87.3419C55.7475 87.9268 53.8029 86.4849 53.8029 84.4713V44.6845C53.8029 42.7255 51.9559 41.2921 50.0582 41.7784L42.2829 43.7708C39.5488 44.4715 37.4482 41.3524 39.1252 39.0822Z"
        fill="#A076FF"
      />
      <path
        d="M115.61 74.6754L134.508 48.8597C135.578 47.3983 137.689 47.2109 139 48.461L157.303 65.9198C159.036 67.5737 158.227 70.4925 155.889 71.0176L151.111 72.0911C149.741 72.3987 148.768 73.6146 148.768 75.0182V105.045C148.768 106.363 147.907 107.527 146.647 107.913L129.564 113.146C127.635 113.737 125.685 112.295 125.685 110.278V81.4412C125.685 79.4795 123.833 78.0456 121.934 78.5367L118.781 79.352C116.052 80.0577 113.944 76.9502 115.61 74.6754Z"
        fill="#A076FF"
      />
      <path
        d="M4.96361 102.337L23.8625 76.5218C24.9323 75.0604 27.0433 74.873 28.3538 76.1231L46.6566 93.5819C48.3905 95.2358 47.5813 98.1546 45.2435 98.6797L40.4646 99.7532C39.0952 100.061 38.1221 101.277 38.1221 102.68V132.707C38.1221 134.025 37.2614 135.189 36.0008 135.575L18.9176 140.808C16.9893 141.399 15.039 139.957 15.039 137.94V109.103C15.039 107.142 13.1872 105.708 11.288 106.199L8.13533 107.014C5.4059 107.72 3.2983 104.612 4.96361 102.337Z"
        fill="#A076FF"
      />
      <path
        d="M47.9224 133.372V68.2429C56.7364 71.3781 77.133 81.9787 88.2068 99.2992C99.2805 116.62 99.4462 139.998 98.1448 149.522L47.9224 133.372Z"
        fill="#3AFFF2"
        stroke="black"
      />
      <path
        d="M98.1448 149.522L146.781 134.26C148.461 133.733 149.595 132.185 149.521 130.425C149.12 120.886 146.925 90.6477 135.057 76.4062C122.113 60.8724 103.709 54.3384 99.083 53.0375C98.4664 52.8641 97.8252 52.9017 97.213 53.0899L47.9224 68.2429C56.7364 71.3781 77.133 81.9786 88.2068 99.2992C99.2805 116.62 99.4462 139.998 98.1448 149.522Z"
        fill="white"
        stroke="black"
      />
      <path
        d="M121.808 130.485L125.949 129.101C126.72 128.843 127.256 128.151 127.278 127.339C127.438 121.487 127.264 97.7401 114.826 82.7946C101.497 66.7784 89.055 64.2106 86.189 63.708C85.8839 63.6545 85.5733 63.6733 85.2759 63.7596L80.6687 65.0965C78.8043 65.6374 78.7577 68.1501 80.5937 68.7805C89.1288 71.7109 101.935 77.1616 110.744 90.9579C116.164 99.4467 119.093 118.679 118.962 128.304C118.941 129.786 120.402 130.955 121.808 130.485Z"
        fill="black"
      />
      <path
        d="M108.633 45.2317L117.452 46.2055L107.067 77.1966C107.067 77.1966 106.599 79.823 103.071 79.4335C99.5431 79.044 98.2477 76.2228 98.2477 76.2228L108.633 45.2317Z"
        fill="#3AFFF2"
        stroke="black"
      />
      <path
        d="M108.632 45.2313L117.452 46.2051L112.491 60.8553C112.491 60.8553 111.569 59.6745 107.881 62.2384C104.192 64.8024 99.8511 71.4003 99.8511 71.4003L108.632 45.2313Z"
        fill="black"
      />
      <path
        d="M84.3682 45.1803L131.742 33.4316C131.742 33.4316 139.019 31.4796 141.148 38.7557C143.278 46.0317 137.421 48.5162 137.421 48.5162L88.0954 62.6152L84.3682 45.1803Z"
        fill="white"
        stroke="black"
      />
      <path
        d="M88.095 62.6152L137.382 48.5958C137.382 48.5958 140.577 47.1153 141.286 43.9209C141.996 40.7266 141.109 38.8352 141.109 38.8352L92.6665 51.635L88.095 62.6152Z"
        fill="#3AFFF2"
        stroke="black"
      />
      <ellipse
        cx="85.7883"
        cy="54.0553"
        rx="8.29848"
        ry="9.4121"
        transform="rotate(-13.5224 85.7883 54.0553)"
        fill="black"
      />
      <path
        d="M48.1004 133.194L98.3228 149.521L83.4158 153.78L33.1934 137.453L48.1004 133.194Z"
        fill="black"
      />
      <g filter="url(#filter0_d_1405_13)">
        <path
          d="M70.3952 99.5913C70.7643 99.6901 70.8231 100.344 70.8301 101.625L70.8325 108.987C70.8325 109.542 70.8325 109.819 71.0041 109.991C71.1476 110.132 71.3639 110.158 71.7542 110.162H74.5075C78.1049 110.162 79.9012 110.162 80.5807 111.331C81.2626 112.5 80.3738 114.063 78.5963 117.188L73.0309 126.986C72.1492 128.537 71.7071 129.313 71.2698 129.196C70.8325 129.083 70.8325 128.192 70.8325 126.407V119.803C70.8325 119.248 70.8325 118.97 70.6608 118.799C70.4892 118.627 70.2118 118.627 69.6569 118.627H66.0242C63.1769 118.613 61.6885 118.498 61.0843 117.458C60.4024 116.29 61.2912 114.726 63.0687 111.601L68.6341 101.804C69.5158 100.252 69.9578 99.4761 70.3952 99.5937V99.5913Z"
          fill="black"
        />
      </g>
      <defs>
        <filter
          id="filter0_d_1405_13"
          x="52.8547"
          y="91.582"
          width="35.9556"
          height="45.6252"
          filterUnits="userSpaceOnUse"
          color-interpolation-filters="sRGB"
        >
          <feFlood flood-opacity="0" result="BackgroundImageFix" />
          <feColorMatrix
            in="SourceAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            result="hardAlpha"
          />
          <feOffset />
          <feGaussianBlur stdDeviation="4" />
          <feComposite in2="hardAlpha" operator="out" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.94 0 0 0 0.6 0"
          />
          <feBlend
            mode="normal"
            in2="BackgroundImageFix"
            result="effect1_dropShadow_1405_13"
          />
          <feBlend
            mode="normal"
            in="SourceGraphic"
            in2="effect1_dropShadow_1405_13"
            result="shape"
          />
        </filter>
        <linearGradient
          id="paint0_linear_1405_13"
          x1="292"
          y1="67.0001"
          x2="8.58823"
          y2="67.0001"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#7F43FF" />
          <stop offset="1" stop-color="#00C6A2" />
        </linearGradient>
      </defs>
    </svg>
  );
}
